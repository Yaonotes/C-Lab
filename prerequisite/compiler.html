<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Compiler - The C Lab for Data Structures and Algorithms</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../preface.html"><strong aria-hidden="true">1.</strong> Preface</a></li><li class="chapter-item expanded affix "><li class="part-title">C/C++ Prerequisite</li><li class="chapter-item expanded "><a href="../prerequisite/compiler.html" class="active"><strong aria-hidden="true">2.</strong> Compiler</a></li><li class="chapter-item expanded "><a href="../prerequisite/strings.html"><strong aria-hidden="true">3.</strong> Strings</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Input, Output and Files</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Arrays</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Pointers</div></li><li class="chapter-item expanded affix "><li class="part-title">Data Structures</li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Linked Lists</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Trees</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Graph</div></li><li class="chapter-item expanded affix "><li class="part-title">Algorithms</li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Sorting</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The C Lab for Data Structures and Algorithms</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#compiler" id="compiler">Compiler</a></h1>
<p>There are generally two types of programming languages if we categorize them by how they are executed by the computer:</p>
<ul>
<li>Compiled Languages: Computers will first translate the whole source code to machine code, then the computers will directly execute the machine code.</li>
<li>Interpreted Languages. Computers will read and execute the code line by line.</li>
</ul>
<p>However, these two concepts are somehow vague for two reasons:</p>
<ul>
<li>Theoretically, every language can be implemented in two ways. The types of running does not depend on the language itself, but on how the compiler executes them.</li>
<li>Some languages are executed in a fusion manner. For example, the programs written in Java will be first compiled into an intermediate form (<a href="https://en.wikipedia.org/wiki/Bytecode">bytecode</a>), and then executed line by line.</li>
</ul>
<p>Nevertheless, it is good to know that there are different ways in executing the program. In the following parts, we will use <code>gcc 8.3</code> as the default compiler.</p>
<h2><a class="header" href="#compile-a-single-source-file" id="compile-a-single-source-file">Compile a Single Source File</a></h2>
<p>Assume we wrote a simple program that only prints the <code>Hello World</code> to the console, as below:</p>
<h4><a class="header" href="#simplec" id="simplec"><strong><code>simple.c</code></strong></a></h4>
<pre><code class="language-c">#include&lt;stdio.h&gt;

int main() {
    printf(&quot;Hello World!\n&quot;);
}
</code></pre>
<p>We can then compile the source coed into an executable with the command: </p>
<p><code>gcc simple.c -o simple.run</code></p>
<p>Then we could run the executable file by <code>./simple.run</code> and the program will print the <code>Hello World</code> to the console. Here we learned the simplest command with our compiler:</p>
<ul>
<li>The filename is considered as the input file of our compiler. It is passed to the compiler without any parameters.</li>
<li>The parameter <code>-o</code> specifies the output executable file name.</li>
</ul>
<h1><a class="header" href="#compile-multiple-files" id="compile-multiple-files">Compile Multiple Files</a></h1>
<p>After compiling the single source file, you may want to know what if there are multiple files, including headers? Assume we have an example as below:</p>
<h4><a class="header" href="#mainc" id="mainc"><strong><code>main.c</code></strong></a></h4>
<pre><code class="language-c">#include &quot;header.h&quot;

int main() {
    char c_array[] = &quot;Hello World!&quot;;
    print_some_word(c_array);
    return 0;
}
</code></pre>
<h4><a class="header" href="#headerh" id="headerh"><strong><code>header.h</code></strong></a></h4>
<pre><code class="language-c">int print_some_word(char words[]);
</code></pre>
<h4><a class="header" href="#headerc" id="headerc"><strong><code>header.c</code></strong></a></h4>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int print_some_word(char words[]) {
    printf(&quot;%s\n&quot;, words);
    return 0;
}
</code></pre>
<p>If there are multiple files, we must explicitly tell the compiler where to look for other source files. In this case, our mail program is defined by <code>main.c</code> and it calls a function defined and implemented in <code>header.c</code>. We could run </p>
<p><code>gcc main.c header.c -o main.run</code></p>
<h2><a class="header" href="#what-happened-during-compilation" id="what-happened-during-compilation">What Happened during Compilation</a></h2>
<p>In order to know what happened during the compilation, we could force our compiler save the intermediate results by running the following command:</p>
<p><code>gcc main.c -save-temps -o main.run</code></p>
<p>We found there are several intermediate temp files generated by our compiler:</p>
<ul>
<li>
<p><code>simple.i</code>. We can read this file in our text editor. The <code>.i</code> file is generated after <strong>preprocessing</strong>, which handles the preprocessors, like <code>#include</code>, <code>#define</code>, etc. For different preprocessors, our compiler will perform different tasks:</p>
<ul>
<li><code>#include</code>: the compiler will replace the directives with the content of the specified file.</li>
<li><code>#define</code>: the compiler will replace the macros.</li>
<li><code>#if</code>, <code>#if def</code> and <code>#ifndef</code>: the compiler will select different portions of the texts.</li>
</ul>
</li>
<li>
<p>After this step, the compiler will transform the preprocessed file into an abstract syntax tree (AST). This stage is responsible for generating most of the compiler warnings as well as parse errors</p>
</li>
<li>
<p><code>simple.bc</code> and <code>simple.s</code>. The compiler then translate the AST into low-level intermediate code, <code>simple.bc</code>. Then the intermediate code will be translated into machine code <code>simple.s</code>. This phase is responsible for optimizing the generated code and handling target-specific code generation.</p>
</li>
<li>
<p><code>simple.o</code>. Assembler (part of the compiling toolchain), at this stage, will translate the machine code into a target object file.</p>
</li>
<li>
<p><code>simple.run</code>. This stage, the linker (part of the compiling toolchain) merge multiple object files into an executable file.</p>
</li>
</ul>
<h2><a class="header" href="#c-and-c-compilers" id="c-and-c-compilers">C and C++ Compilers</a></h2>
<p>Essentially, C++ is a superset of C that includes some object-oriented features. Other than that, C is also slightly faster than C++. There might be some differences in the header files, but you can usually find alternatives in both two languages.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../preface.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../prerequisite/strings.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../preface.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../prerequisite/strings.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
